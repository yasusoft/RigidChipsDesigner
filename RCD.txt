======================================================================
【タイトル】 RigidChips Designer ver.0.21
【ファイル】 rcd021.lzh
【更新日付】 2006/04/05
【制 作 者】 yasu
【動作環境】 WindowsXP,RigidChips15B25cで確認
【配布形態】 フリーウェア
【 E-Mail 】 mail@yasu.hot.co.jp
【HomePage】 http://www.usay.jp/
【再 配 布】 基本的に禁止。ホームページを紹介して下さい。
【著 作 権】 Copyright(C)2005-2006 Yasu software
======================================================================

■ RigidChips Designer の紹介

　このソフトは、剛体シミュレータRigidChipsで読み込むモデルファイルを編
集・閲覧するソフトです。OpenGLによる三次元表示により確認しながら、チッ
プの追加や削除を行うことが可能です。クリップボードを用いたコピーにも対
応しています。
　このソフトにより作られたモデルファイルは、非営利目的に限り自由に配布
することができます。

RigidChipsは下記URLにて配布されています。
http://www.iamas.ac.jp/~takeya04/
初めてな方はWikiを読んでみることをオススメします。
http://f42.aaa.livedoor.jp/~nemucat/pukiwiki14/

　尚、ビデオカードによってはWindowsXP付属のOpenGL32.dllで動作しない場合
があります。その場合は、下記URLより別の(旧バージョンの)OpenGL32.dllを入
手し、RCDと同じフォルダに置くことで動作するかもしれません。
　WindowsXP以外で、OpenGL32.dllが無い場合も同様に入手して下さい。
ftp://ftp.microsoft.com/Softlib/MSLFILES/OpenGL95.exe
http://www.vector.co.jp/soft/win95/util/se073121.html


■ 基本的な使用方法

　左のモデル表示画面では、左クリックでチップを選択できます。選択してい
るの状態でチップやカーソルを左クリックするとメニューが表示され、操作を
行えます。
　モデル表示画面で右ドラッグをすると、モデルを回転することができます。
回転の中心は初めはCoreになっていますが、チップを２回クリックして出るメ
ニューからOriginを選択することにより、選択したチップを回転の中心に変更
できます。
　モデル表示画面で右を押しながら左ドラッグをすると、全体の移動を行えま
す。ホイ〜ルを回すと、縮尺が変わります。
　また、右下のKeyTestにフォーカスがある状態でキーボードを押しても回転縮
尺できます。キーはRigidChipsと同様で、KL,.IOの６キーです。

　チップを２回クリックすると出てくるメニューでは、チップの追加や削除が
行えます。
　既存のチップをクリックした時は、クリップボードを用いるメニューが表示
されます。切り取りやコピーを行うと、選択しているチップ配下のチップ情報
がクリップボードにテキスト形式で格納されます。また貼り付けを行うと、ク
リップボードのテキストを解析してチップの追加を行います。クリップボード
は、出力形式と同様のテキスト形式で使用されるため、テキストエディタとの
併用が可能です。
　削除を実行すると、選択したチップ以下すべてのチップが削除されます。誤
って削除してしまった場合は、EditメニューからUnDeleteを選択して下さい。
　カーソルをクリックした場合は、チップの追加メニューが表示されます。追
加したいチップの種類を選ぶことにより、クリックした位置へ追加が行われま
す。尚、このメニューは右上のリストを右クリックしても表示されます。

　チップを選択すると、右側にチップの情報が表示されます。右上の４つの枠
は、それぞれ北東西南に接続されているチップのリストです。リストから選ん
でクリックすることで、そのチップを選択できます。↑ボタンを押すと、１つ
親のチップを選択できます。*ボタンを押すとツリー表示と切り替えられます。
　下方には、そのチップが接続されている方位、チップの種類、オプション値
が表示されています。方位や種類はコンボボックスから選択することで変更で
きます。方位を変更する時に、Rのチェックが入っていると、サブチップも一緒
に回転されます。オプション値枠では、下キーを押すことで新しいオプション
を追加できます。右クリックメニューからも追加可能です。オプションを削除
するには、オプション名と値を空欄にするか、右クリックメニューからDelete
を実行して下さい。

　右下のKeyTestをクリックしてキーを押すと、キーを押したときのモデルの
動きを確認できます。キーはRigidChipsでのデフォルトの設定通りです。


■ テキストエディタとの併用

　ToolメニューのAutoReloadにチェックを入れると、現在開いているファイル
のタイムタイムスタンプが変わった時に自動リロードされます。テキストエデ
ィタで編集しながら小まめに保存することで、表示を確認しながら編集でき、
便利です。但し、RCDで変更を行っている場合は自動リロードされません。


■ 設定

　Select AddChipにチェックが入っていると、チップを追加した時に追加した
チップが自動的に選択されます。
　Show void optionsにチェックが入っていると、値が指定されていないオプ
ションも右側のエディタに表示されます。
　Show CGravityにチェックが入っていると、重心が表示されます。
　Hideメニューでチェックを入れると、指定した種類のチップを描画せずに隠
すことができます。Balloonの場合は、powerが指定されていても最小サイズに
なります。
　Saveメニューは、保存時の整形を指定します。ObfuscateをONにすると、他の
設定にかかわらず改行やスペースが一切無くなります。
　RCD.iniの[RCD]セクションにBGColorという項目を追加すると背景色を変更で
きます。0x000020など頭に0xをつけると16進数として解釈され、RGB値は
0xRRGGBBとなります。


■ その他の機能

　ファイルはエクスプローラーから実行ファイルやウィンドウにドロップして
も読み込めます。FileメニューのLoad Clipboardを使うと、クリップボードの
テキストを読み込めます(貼り付けとは違い、ValやKeyもすべて読み込む)。ア
ップローダーなどで使用すれば、ファイルに保存せずに手軽に閲覧できます。
　右側の領域のサイズは、境目をドラッグして変えられますよ。
　Valでは変数が編集できます(略
　Keyではキーを押したときに変更する変数が指定できます(略
　＋ボタンを押すと、選択チップと親チップの間にチップが追加されます。選
択チップがChip,Frame,Weight,Cowlの場合は選択チップと同じ種類のチップ、
違う場合はChipが追加されます。一部のオプション値は引き継がれます。−ボ
タンを押すと、選択チップが削除され、サブチップは親チップに受け継がれま
す。UnDeleteはできません。
　右下のタブでModelMemoに切り替えると、モデルの題名や説明を記述できま
す。これは、ファイルの先頭にコメントとして保存されます。ChipMemoでは、
各チップ個別のメモを記述でき、これはチップの定義前にコメントとして保存
されます。
　ToolメニューのRigidChips Loadを実行すると、現在起動しているRigidChips
に現在開いているファイルを読み込ませます。
　ConvertToCowlを実行すると、選択チップ(orコア)以下でCowlに変更可能なチ
ップをすべてCowlに変換します。
　Scriptに記述されたスクリプトは、独自のエンジンで実行されます。バグ満
載＆処理速度遅いけど怒らないでね。Scriptタブで編集してSetScriptを押すと
反映/実行開始されます。StopScriptを押すとスクリプトは実行されなくなりま
す。Luaについても同様です。尚、読み込み直後はスクリプトは停止状態です。
　FileメニューからImportを選択すると、右側にインポート画面が表示されま
す。この画面では、プレイステーションのメモリカードデータからパネキット
のモデルをインポートすることができます(田中伸さんSpThx)。ConvertTrulyに
チェックを入れると、フレームを用いてジョイントが忠実に再現されます。
キーは□×○△がそれぞれZXCV、L2L1R1R2がそれぞれASDFになります。


■ チュートリアル

　チュートリアルとして、Basicの作り方を簡単に紹介します。

Coreを左クリックして選択し、赤カーソル(北)を左クリックしてメニューを出す
メニューからChipを選択して北に追加する
これを繰り返してBasicのチップ群を追加する
Wheelをクリックして選択状態にする
(画面右のオプション枠を右クリックしてangleを追加)
Value欄をクリックして90と入力(又はコンボボックスから90を選択)
これを各Wheelに対して行う

Valタブをクリックして変数編集画面を表示する
NameにENGINEと入力する
Defualtには0、Minには-2500、Maxには2500、Stepには1000と入力
(一時的にDefaultに0以外の値を入れておくと後で分かりやすいかも)
OKボタンをクリックして変数を追加する
NameにHANDLEと入力する
Defualtには0、Minには-20、Maxには20、Stepには5と入力
OKボタンをクリックして変数を追加する

Bodyタブをクリックする
後ろのWheelをクリックする
(画面右のオプション枠を右クリックしてpowerを追加)
Value欄をクリックしてコンボボックスからENGINE又は-ENGINEを選択
(変数のDefaultが0以外ならこの時アニメーションする)

Keyタブをクリックしてキー動作編集画面を表示する
KeyNumberで0か1を選択する
VariableNameでENGINEを選択する
Stepに500又は-500と入力する
OKボタンを押す
同様にHANDLEも追加する
KeyTestでキーを押して動作を確認する

　以上の流れでモデルを作成できます。


■ 仕様

・読み込み時に基本的にコメントは失われます。但し、ファイルの先頭に記述
　されているコメントはModelMemoとして、チップの定義直前に記述されてい
　るコメントはChipMemoとして読み込まれます。また、スクリプト内部もその
　まま読み込まれます。
・スクリプトの殆どの関数は適当な値(空値やゼロ)を返します。
・パネキットインポートは完全ではありません。
→半チップずらすのが難しいため。二等辺三角形でasin(0.25)=15としている
・(半)透明オブジェクト同士の前後関係がおかしい
→描画処理順序の問題。めんどくｓｒｙ


■ アンインストール

　設定をexeと同じフォルダのiniファイルに記録しているので、一緒に消して
下さい。


■ その他

　感想・バグ・要望などがあったらホームページもしくはメールでお知らせく
ださい。バグ報告の場合は、どのようにしたらどのようになるかをなるべく詳
しくお願いします。また、バグ等で不具合が起こったとしても責任は負いかね
ます。
　このソフトをホームページなどで紹介する場合は、作者にメールで知らせて
ください（ファイルの転載は禁止。ホームページへのリンクだけの場合は連絡
不要です）。また、再配布はご遠慮下さい。ホームページを紹介して相手に直
接ホームページからダウンロードさせて下さい。
　スクリプト実行を実現するために、Luaを組み込んであります。Luaについて
は、http://www.lua.org/ をご覧下さい。


■ 改悪履歴

□ 2005/08/24
なんとなくOpenGLの勉強兼ねて作ろうかなぁ
OpenGLの復習・勉強開始

□ 2005/08/25 17:00
Borland C++Builderで製作開始

□ 2005/08/25 24:00
rcd,txtを読み込んで表示できるようになる
(フレームなど一部はまだチップとして表示)

・既にモデラーがあることに気づくΣ(ﾟДﾟ)Ω

□ 2005/08/26 25:00
Wheel(option!=0,effect!=0)除くチップの表示実現
Val,Key対応
powerに応じて回ったり火噴いたり

□ 2005/08/27 19:00
Wheelの輪を描いてみた(手抜き)
自動リロード機能 → テキストエディタと一緒に使える!?
光を導入 色の指定むずかしめんどくさ

□ 2005/08/28 24:00
Jet(option=1,2)の大きさ計算式判明
XP-Lunaでフォームが崩れるのが勝手に直った？
昨日のArmのエフェクトに行列かけるの忘れてた
HPのソフトコーナーに置いてみるか

□ 2005/08/31 24:00
回転中心変更に対応するためオブジェクト構造をスパゲッティ化
チップを選択できるようにしてみた
選択チップが回転中心になるように
将来を考えて選択カーソル表示

□ 2005/09/02 24:00
ぷろぱちーエディタ
書き出し機能

□ 2005/09/03 ver.0.1
Val,Key編集機能
チップ追加/削除機能
エディタとしての機能がついた
ただバグがある可能性あるのでバックアップは忘れずに
テクスチャは内蔵にした

□ 2005/09/16 ver.0.11
バグフィックス
キー16まで対応
Cowl下にCowl以外がないかチェック
Cowl化機能
Script(NotLua)対応でバグ追加

□ 2005/09/21 ver.0.12
バグフィックス
メニューをちょっといじくり
サブも一緒に回転機能
UnDelete機能

□ 2005/09/24 ver.0.13
追加チップを選択するように(オプション)
SaveオプションにObfuscate
設定をiniに保存
パネキットメモリカードからインポート機能
キーボードで回転縮尺

□ 2005/09/25 ver.0.14
日本語ファイル名でRCに読み込ませられなかったバグ修正
オプション値に空のオプションも表示機能,移動ソート機能
自然消滅していた方向付貼り付け復活
方向付でない貼り付けで複数チップを同時に貼り付け対応
デフォルトカメラ位置を設定可能
RCDシグネチャがついていない場合は上書き前に警告

□ 2005/09/26 ver.0.15
バグフィックス
方角指定が無くても読み込めるように
プラス/マイナス ボタン
Ctrl+ZXCV,DelはKeyTestにフォーカスがある時のみ処理
フレーム選択しにくいので真ん中に当たり判定(透明)

□ 2005/09/28 ver.0.16
Lua組み込み
読み込み時にスクリプトは自動実行しないようにした(Setを押すと実行開始)

□ 2005/10/11 ver.0.17
改行コードがおかしかったバグを修正
回転系変更
背景色変更機能(ini直接指定)
リストに色を付けてみたり
重心表示機能

□ 2005/10/13 ver.0.18
ツリー表示
設定ダイアログ
コメント(Memo)編集機能
ユーザを混乱させるしあんま意味ないのでObfuscateを削除

□ 2005/10/16 ver.0.19
一度読込エラー起こすと以降全てエラーになるバグ修正(！)
ChipMemoがうまく読み込めてなかったバグ修正
クリップボードから読み込み機能
KeyTestという文字が選択されてるとコピーできなかった不具合修正
springとdamperのコンボに 0, 0.5, 1

□ 2006/04/02 ver.0.20
・Coreに方角がついていても読み込めるよう修正
・同じオプション値が２つ書いてあると選択できないバグ修正
・Stepが無いValを変更しても現在の値(見た目)が変わらないバグ修正
・ネット/燃料関係関数を追加(返す値は空値やゼロ)
・Weightのoption対応
・Cowlのeffectに適当に対応

□ 2006/04/05 ver.0.21
・0.20で光具合がおかしくなってたバグ修正
・半透明/発光の色を修正

□ 2112/09/03
ドラえもん誕生
RigidChipsDesigner完成

